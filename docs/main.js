"use strict";(()=>{var jt="#7d2253";var at="#ffb42a",Xt="#ffe271";var L="#fffadc";var Ut="#392c4e",Le="#1e1e27",ae="#0c4c45",Zt="#1c8350",zt="#21cd40";var Ft="#6ebed3",je="#4975a9",Qt="#364374",B="#201e51",H="#190d24";var Vt=(e,n,t)=>{let o=Math.min(innerWidth/n,innerHeight/t);e.width=n,e.height=t,e.style.width=n*o+"px",e.style.height=t*o+"px"};var Kt=(e,n)=>{let t=performance.now(),o=0;(function r(s){o=s-t,t=s,o>1e3&&(o=0),e(o),n(o),requestAnimationFrame(r)})(t)};var q=(e=0,n=1)=>n+(e-n)*Math.random(),ct=(e,n)=>Math.round(q(e,n));var Me=(e,n,t,o,r,s)=>e>t&&n>o&&e<t+r&&n<o+s;var Xe=(e,n,t)=>e+(n-e)*t;var Ue=e=>e*(2-e),Ze=e=>1-Math.abs(e*2-1);var _={x:0,y:0};var M=[[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,7,0,0,0,0],[10,10,9,0,0,3,0,0,5,0],[2,3,3,2,1,4,2,3,2,2],[4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4]],[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,7,0,6,0,0,0],[0,0,0,0,2,0,0,0,0,0],[10,9,0,2,0,0,0,0,0,0],[1,3,3,4,1,6,1,0,5,0],[4,4,4,4,4,4,4,3,1,2],[4,4,4,4,4,4,4,4,4,4]],[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,5,0,6,0,0,0],[0,0,0,0,2,0,0,0,0,0],[10,9,0,0,7,0,3,0,0,0],[1,3,3,2,1,6,0,0,6,2],[4,4,4,4,4,4,2,3,4,4],[4,4,4,4,4,4,4,4,4,4]],[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,7,0,0,0],[0,0,0,0,0,0,0,1,6,0,0],[10,9,5,0,7,7,0,0,0,6,0],[2,3,3,2,1,2,2,0,7,1,0],[4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4]],[[0,0,0,0,0,0,0,0,0],[0,0,2,7,0,0,7,0,0],[0,0,4,0,0,0,2,0,0],[10,10,9,0,0,0,0,0,5],[0,2,3,3,0,0,2,0,0],[0,0,0,4,6,0,0,0,0],[0,0,0,4,4,2,2,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,10,0,7,6],[0,10,0,2,0],[5,9,7,0,0],[2,3,6,2,6]],[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,7,0,0],[0,0,0,6,2,0,0],[0,7,0,7,6,0,0],[0,2,0,0,0,0,0],[10,10,9,0,6,0,0],[2,3,3,0,0,2,3],[0,0,0,0,5,0,0]],[[0,0,0,0,0,0,0,0,8,0],[0,0,0,0,0,0,0,0,2,0],[0,0,0,0,0,0,0,0,5,3],[0,0,0,0,0,0,0,2,0,4],[10,10,9,0,0,7,6,0,0,4],[2,3,3,2,1,2,2,3,4,4]],[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7],[0,0,0,0,0,8,0,0,2],[10,10,9,8,0,5,8,2,0],[2,3,3,2,1,2,2,3,4]]];var Jt=new Path2D("M 70.2 9.1 l 5.7 -5.9 C 67.9 -2.8 50.4 0.4 42.8 6 c -3.7 -1.1 -7.4 -1.2 -11.1 -1 c -9 0.4 -1.5 7.8 1.4 10.8 c -2.4 3.9 -4.6 7.9 -6.7 12.1 c -1.6 4.4 -5 6 -9.8 5.5 l -5.3 -1.1 c -2.8 -0.6 -12.8 -3.4 -11.1 2.4 c 1.7 3.8 6 7.1 10.5 10.3 c 0.4 2.6 1 5.2 1.8 7.9 c 2.1 7.6 5.4 7.5 7.6 0.4 l 3.1 -9.7 c 0.9 -3.5 2.9 -5 5.5 -5.3 c 7.8 -0.7 14.2 2.1 24.7 -1.2 c 0.5 2.7 1.2 5.4 2.2 8 c 1.1 1.9 2.7 2.1 4.9 -0.3 c 2.2 -3.8 3.7 -8.1 4.4 -12.8 c 7.8 -8.1 13.3 -19.4 12.5 -26.1 L 70.2 9.1 L 70.2 9.1 z z"),qt=new Path2D("M 42 86 C 17 85 7 19 54 17 C 101 15 85 89 50 65 C 37 57 48 34 61 40"),ft=new Path2D("M 0 0 L 10 10 L 50 10 L 60 0 L 60 60 C 60 60 60 70 50 70 L 10 70 C 0 70 0 60 0 60 L 0 0"),$=new Image;$.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIwIiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDcyMCAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+Cgo8cmVjdCB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjE0NCIgeD0iMCIgeT0iMCIgZmlsbD0iI2MzNjY0ZSIvPgo8cmVjdCB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjI5IiB4PSIwIiB5PSIwIiBmaWxsPSIjMDBkOThiIi8+CjxjaXJjbGUgY3g9IjEwNSIgY3k9IjcwIiByPSIxMiIgZmlsbD0iI2FjNTU0MSIvPgo8Y2lyY2xlIGN4PSI0MCIgY3k9IjEwMCIgcj0iOCIgZmlsbD0iI2FjNTU0MSIvPgoKPHJlY3Qgd2lkdGg9IjE0NCIgaGVpZ2h0PSIxNDQiIHg9IjE0NCIgeT0iMCIgZmlsbD0iI2MzNjY0ZSIvPgo8cmVjdCB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjI5IiB4PSIxNDQiIHk9IjAiIGZpbGw9IiMwMGQ5OGIiLz4KPGNpcmNsZSBjeD0iMjQwIiBjeT0iMjkiIHI9IjEyIiBmaWxsPSIjMDBkOThiIi8+CjxjaXJjbGUgY3g9IjE5MiIgY3k9IjY0IiByPSI4IiBmaWxsPSIjYWM1NTQxIi8+Cgo8cmVjdCB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjE0NCIgeD0iMjg4IiB5PSIwIiBmaWxsPSIjYzM2NjRlIi8+CjxyZWN0IHdpZHRoPSIxNDQiIGhlaWdodD0iMjkiIHg9IjI4OCIgeT0iMCIgZmlsbD0iIzAwZDk4YiIvPgo8Y2lyY2xlIGN4PSIzMzYiIGN5PSIyOSIgcj0iMTIiIGZpbGw9IiMwMGQ5OGIiLz4KPGNpcmNsZSBjeD0iMzg0IiBjeT0iMjkiIHI9IjgiIGZpbGw9IiMwMGQ5OGIiLz4KCjxwYXRoIGQ9Ik00ODQgNDhsMTYtMzJhNSA1IDAgMCAxIDggMGwxNiAzMi00MCAwIiBmaWxsPSIjYzViZGI2IiBzdHJva2U9IiMwMDAwMDAiIC8+CjxwYXRoIGQ9Ik00ODQgOTZsMTYgMzJhNSA1IDAgMCAwIDggMGwxNi0zMi00MCAwIiBmaWxsPSIjYzViZGI2IiBzdHJva2U9IiMwMDAwMDAiIC8+CjxwYXRoIGQ9Ik01MjggNTJsMzIgMTZhNSA1IDAgMCAxIDAgOGwtMzIgMTYgMC00MCIgZmlsbD0iI2M1YmRiNiIgc3Ryb2tlPSIjMDAwMDAwIiAvPgo8cGF0aCBkPSJNNDgwIDUybC0zMiAxNmE1IDUgMCAwIDAgMCA4bDMyIDE2IDAtNDAiIGZpbGw9IiNjNWJkYjYiIHN0cm9rZT0iIzAwMDAwMCIgLz4KPHBhdGggZD0iTTQ4MCA0OGw0OCAwIDAgNDgtNDggMCAwLTQ4IDQ4IDQ4bTAtNDgtNDggNDgiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9IiNjMzY2NGUiIHN0cm9rZT0iI2FjNTU0MSIgc3Ryb2tlLXdpZHRoPSIxMCIgLz4KCjxyZWN0IHdpZHRoPSIxNDQiIGhlaWdodD0iMTQ0IiB4PSI1NzYiIHk9IjAiIGZpbGw9IiNjMzY2NGUiIC8+CjxjaXJjbGUgY3g9IjYxMCIgY3k9IjY5IiByPSIxMiIgZmlsbD0iI2FjNTU0MSIgLz4KPGNpcmNsZSBjeD0iNjc1IiBjeT0iMTA2IiByPSI4IiBmaWxsPSIjYWM1NTQxIiAvPgo8L3N2Zz4K";var $t=600,ce=(e=30,n=100)=>({x:new Float32Array(n),y:new Float32Array(n),vx:new Float32Array(n),vy:new Float32Array(n),life:new Float32Array(n),maxLife:new Float32Array(n),alive:new Array(n).fill(!1),maxParticles:n,particleCount:0,particleSize:e}),sr=e=>{for(let n=0;n<e.maxParticles;n++)if(!e.alive[n])return n;return-1},fe=(e,n,t,o=4)=>{let r=n*100+100/2,s=t*100+100/2;for(let p=0;p<o;p++){let c=sr(e);if(c===-1)break;let h=q(0,Math.PI*2),S=q(.05,.1);e.x[c]=r,e.y[c]=s,e.vx[c]=Math.cos(h)*S,e.vy[c]=Math.sin(h)*S,e.life[c]=$t,e.maxLife[c]=$t,e.alive[c]=!0,c>=e.particleCount&&(e.particleCount=c+1)}};var pe=(e,n)=>{for(let t=0;t<e.particleCount;t++)e.alive[t]&&(e.x[t]+=e.vx[t]*n,e.y[t]+=e.vy[t]*n,e.life[t]-=n,e.life[t]<=0&&(e.alive[t]=!1))},ue=(e,n)=>{for(let t=0;t<e.particleCount;t++){if(!e.alive[t])continue;let o=e.life[t]/e.maxLife[t],r=e.particleSize+(1-o)*20;n.globalAlpha=o,n.beginPath(),n.arc(e.x[t]-_.x,e.y[t]-_.y,r,0,Math.PI*2),n.closePath(),n.fill()}n.globalAlpha=1};var W=[],R=[],z=[],F=[],Qe=0,ut=ce(1,10),Ce=null,tn=e=>{W=[],R=e,z=[],F=[],Qe=0,Ce=null;for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++){let o=e[n][t];(o===1||o===2||o===3||o===4||o===5||o===6||o===7||o===8)&&(W.push({x:t*100,y:n*100,type:o}),o===7?z.push({x:t,y:n}):o===8?F.push({x:t,y:n}):o===5&&(Ce={x:t,y:n}))}},en=0,nn=e=>{en+=1,Qe+=e*.005,pe(ut,e),Ee()&&Ce&&en%20===0&&fe(ut,Ce.x,Ce.y,2)},on=e=>{for(let n of W){let t=n.x-_.x,o=n.y-_.y,r=n.type;if(r===7||r===8){let s=Math.sin(Qe);e.translate(t,o+100/4+s),e.shadowColor=L,e.shadowBlur=10*(Math.sin(Qe/2)*.5+.5),e.fillStyle=r===7?ae:jt,e.fill(Jt),e.setTransform(1,0,0,1,0,0),e.shadowBlur=0}else r===5?(Ee()?e.strokeStyle=at:e.strokeStyle=B,e.lineWidth=10,e.translate(t,o),e.stroke(qt),e.setTransform(1,0,0,1,0,0)):r===6?e.drawImage($,432,0,144,144,t,o,100,100):r===1?e.drawImage($,0,0,144,144,t,o,100,100):r===2?e.drawImage($,144,0,144,144,t,o,100,100):r===3?e.drawImage($,288,0,144,144,t,o,100,100):r===4&&e.drawImage($,576,0,144,144,t,o,100,100)}Ee()&&(e.fillStyle=at,e.lineWidth=1,ue(ut,e))},St=(e,n)=>{if(n<0||n>=R.length||e<0||e>=R[0].length)return!1;let t=R[n][e];return t===1||t===2||t===3||t===4},rn=(e,n)=>n<0||n>=R.length||e<0||e>=R[0].length?!1:R[n][e]===5,_t=(e,n)=>n<0||n>=R.length||e<0||e>=R[0].length?n>10:R[n][e]===6,ht=(e,n)=>z.some(t=>t.x===e&&t.y===n),yt=(e,n)=>F.some(t=>t.x===e&&t.y===n),ln=(e,n)=>{let t=z.findIndex(r=>r.x===e&&r.y===n),o=W.findIndex(r=>r.x===e*100&&r.y===n*100);t!==-1&&z.splice(t,1),o!==-1&&W.splice(o,1)},sn=(e,n)=>{let t=F.findIndex(r=>r.x===e&&r.y===n),o=W.findIndex(r=>r.x===e*100&&r.y===n*100);t!==-1&&F.splice(t,1),o!==-1&&W.splice(o,1)},Ee=()=>z.length===0&&F.length===0,an=()=>z,cn=()=>F,fn=()=>W,pn=(e,n,t)=>{z=[...e],W=[...n],F=[...t]};var me=(e,n)=>({duration:e,elapsed:0,isActive:!1,onComplete:n}),ee=e=>{e.isActive=!0,e.elapsed=0},de=(e,n)=>e.isActive?(e.elapsed+=n,e.elapsed>=e.duration?(e.isActive=!1,e.onComplete?.(),!0):!1):!1,gt=(e,n)=>{ee(e),n&&(e.duration=n)},xt=e=>e.isActive;var ve=!1,un=0,mn=0,dn=!1,bn="#fff",On,Ve=me(900),j=(e,n,t,o,r)=>{ve=!0,un=e,mn=n,dn=t,bn=o,ee(Ve),On=r},In=e=>{ve&&de(Ve,e)&&(ve=!1,On?.())},Sn=()=>ve,_n=e=>{if(ve){let n=e.canvas,t=Ue(Ve.elapsed/Ve.duration),o=1920*(dn?t:1-t);e.save(),e.beginPath(),e.rect(0,0,n.width,n.height),e.arc(un,mn,o,0,Math.PI*2,!0),e.clip(),e.fillStyle=bn,e.fillRect(0,0,n.width,n.height),e.restore()}};var Ke=[],hn=(e,n,t,o)=>{let r={playerRects:e.map(s=>({x:s.x,y:s.y})),growItems:[...t],renderables:[...n],shrinkItems:[...o]};Ke.push(r)},yn=()=>Ke.length>0?Ke.pop():null,gn=()=>{Ke=[]};var xn=e=>{let n=44100,t=4096,o=t-1,r=new Float32Array(t*4),s=3639956645,p=(i,m,x,y,g=0,b=0,O=0,D=0,A=0,T=0,C=0,ge=0,K=0,ie=0,k=0,xe=0,Re=0,wt=0,Te=0,it=0,Gt=0,wo=0,Rt=0,Go=0,Ro=0,kr=0,wr=0,No=0,Yo=0,Ho=0,Wo=0,jo=0,Xo=0,Uo=0)=>{let Nt=.00392156862745098,Zo=Uo*t,zo=C*t,Fo=Re*t,Qo=Math.pow(2,No-8)/i,Vo=Yo/512,Ko=.5/n*t,Jo=Xo/512,qo=Math.pow(2,jo-8)/i*t,Yt=0,Ht=0,$o=Ro*Nt,er=wt*46566e-14,Ne=0,Ye=0,He=0,tr=1/Te,nr=1/Gt,or=Math.pow(1.059463094,m+(b-8)*12+O-128)*.00390625*(1+8e-4*D),rr=Math.pow(1.059463094,m+(ge-8)*12+K-128)*.00390625*(1+8e-4*ie),lr=Te+it+Gt-1;for(let J=lr;J>=0;--J){let We=J+g,Wt=r[Zo+(We*qo&o)]*Jo+.5,w=0,Ae=Go,G,Z=1;J<Te?Z=J*tr:J>=Te+it&&(Z-=(J-Te-it)*nr),G=or,Ho&&(G*=Wt),A&&(G*=Z*Z),Yt+=G,w+=r[zo+(Yt*t&o)]*T,G=rr,k&&(G*=Z*Z),Ht+=G,w+=r[Fo+(Ht*t&o)]*xe,wt&&(s^=s<<13,s^=s>>17,s^=s<<5,w+=s*er*Z),w*=Z*Nt,Rt&&(Wo&&(Ae*=Wt),Ae=1.5*r[Ae*Ko&o],Ne+=Ae*Ye,He=$o*(w-Ye)-Ne,Ye+=Ae*He,w=[w,He,Ne,Ye,Ne+He][Rt]),G=r[We*Qo*t&o]*Vo+.5,w*=.00238*wo,x[We]+=w*(1-G),y[We]+=w*G}},c=i=>{for(let m=0;m<i.length;m++)i[m]=Array.isArray(i[m])?c(i[m]):i[m]??0;return i},h=(i,m)=>{let x=i[20]*m>>1,y=i[21]/255,g=Math.ceil(Math.log(.1)/Math.log(y));return i[13]+i[14]+i[15]+g*x},S=(i,m,x,y,g)=>{if(!g[21])return;let b=g[20]*y>>1,O=g[21]/255,D=i.length-b;for(let A=x,T=x+b;A<D;A++,T++)i[T]+=m[A]*O,m[T]+=i[A]*O},P=(i,m=147,x=5513)=>{i=c(i);let y=h(i,x),g=e.createBuffer(2,y,n),b=g.getChannelData(0),O=g.getChannelData(1);return p(x,m,b,O,0,...i),S(b,O,0,x,i),g},U=i=>{i=c(i);let m=i[0],x=i[1],y=0;for(let T of x){let C=T[1].length*m*32+h(T[0],m);C>y&&(y=C)}let g=e.createBuffer(2,y,n),b=g.getChannelData(0),O=g.getChannelData(1),D=new Float32Array(y),A=new Float32Array(y);for(let T of x){let C=T[0],ge=T[1],K=0,ie=y;D.fill(0),A.fill(0);for(let k of ge)for(let xe=0;xe<32;xe++){let Re=T[2][k-1]?.[xe];Re&&(ie=Math.min(ie,K),p(m,Re,D,A,K,...C)),K+=m}S(D,A,ie,m,C);for(let k=ie;k<y;k++)b[k]+=D[k],O[k]+=A[k]}return g};for(let i=0;i<t;i++)r[i]=Math.sin(i*6.283184/t),r[i+t]=r[i]<0?-1:1,r[i+t*2]=i/t-.5,r[i+t*3]=i<t/2?i/(t/4)-1:3-i/(t/4);return{sound:P,song:U}};var ir=[11025,[[[7,0,0,1,147,0,7,0,0,1,255,0,0,50,150,4800,61,2,600,254],[0,1,1,1,1,1,2,2,2,0,2,0,0,0,1,2,2],[[135,0,0,0,135,135,0,0,135,0,0,0,135,135,0,0,135,0,0,0,135,135,0,0,135,0,0,0,135,0,135],[135,0,0,0,135,0,135,135,0,0,135,0,135,0,0,0,135,0,0,135,135,0,135,0,135,0,0,135,135]]],[[8,0,0,0,0,0,8,0,0,0,0,0,60,50,419,4607,130,1,10332,120,4,16,5,108,0,0,5,187],[1,0,1,1,0,0,2,1,2,2,2,1,1,1,0,1,1,0,1],[[0,0,0,135,0,0,0,0,0,0,135,135,0,0,0,0,0,0,0,135,0,0,0,0,0,0,135,135],[150,0,0,0,135,0,150,150,0,0,135,0,150,0,150,0,135,135,0,0,150,0,135,0,150,0,135,135]]],[[8,0,0,1,82,2,8,0,0,0,0,0,255,100,0,9090,232,3,5200,63],[1,1,1,1,0,0,0,1,2,2,2,1,2,2,1,2,2],[[0,0,0,0,0,0,0,135,0,0,0,0,0,0,0,135,0,0,0,0,0,0,0,135,0,0,0,0,0,0,0,135],[0,0,0,0,0,0,0,148,135,135,135,0,0,0,148,0,135,0,0,0,148,0,135,135,135,0,0,0,148,135]]],[[7,0,0,0,43,1,3,1,44,1,145,3,17,0,842,9283,76,2,730,233,2,68,7,155,0,1,9,243],[1,1,1,1,1,1,1,2,1,1,2,1,1,2,2,2,2,1,1],[[141,0,0,0,0,0,0,0,139,0,0,0,0,0,0,138,141,0,0,0,0,0,141,0,139],[141,139,141,139,0,139,141,0,141,0,139,139,0,0,0,138,141,139,138,141,0,0,141,0,139,139]]],[[7,0,0,0,192,2,8,0,0,0,66,1,0,1318,150,0,139,2,5434,108,0,90,1,27,1,1,6,11,3],[0,0,0,0,1,1,2,2,1,1,3,0,0,2,2,3,3],[[148,0,0,139,0,145,0,139,0,145,0,148,0,0,0,0,139,148,0,139,0,145,0,148,143,139,148],[139,0,0,0,139,0,146,0,148,151,0,0,0,0,139,0,146,0,139,148,150,151,0,150,0,148,0,145,0,139,145],[145,145,151,0,148,0,150,0,148,139,150,0,0,0,0,0,145,145,151,0,148,0,150,0,150,138]]]]],Tn=[7,0,0,1,197,0,15,0,0,0,0,0,0,226,842,0,158,0,0,0,0,0,0,0,0,1],ar=[8,0,0,0,0,0,8,0,0,0,0,0,255,301,2934,4962,220,3,1407,16,2,0,1,27,0,1,2,51],cr=[6,0,0,1,255,1,0,0,0,0,0,0,0,763,1551,1808,98,0,37,16,2,45,1,27,0,0,2],fr=[0,0,0,1,255,1,0,0,0,0,0,0,231,38,1431,4701,98,0,37,16,2,0,1,27,0,0,2],pr=[9,0,0,1,255,0,0,0,0,0,0,0,10,0,3324,12404,131,0,37,16,2,0,1,27,0,0,2],ur=[8,0,0,1,255,3,0,0,0,0,0,0,0,15017,301,194,102,0,12,16,2,133,1,27,0,0,2],mr=[8,0,0,1,255,3,0,0,0,0,0,0,0,4,3532,10113,102,0,12,16,1,133,1,27,0,0,2],dr=[6,0,0,0,255,3,9,0,0,0,66,0,5,62,22729,7066,102,0,0,74,6,140,8,107,1,0,12,118,1],E,Je,wn,Gn,Rn,Nn,Yn,Hn,Wn,jn,Xn,Un,An,Ln,Mn,Cn,En,vn,Pn,Dn,Bn,kn,Zn=()=>(Je=new AudioContext,E=xn(Je),wn=E.song(ir),Gn=E.sound(Tn,142),Rn=E.sound(Tn),Nn=E.sound(ar),Yn=E.sound(cr),Hn=E.sound(fr),Wn=E.sound(pr),jn=E.sound(ur),Xn=E.sound(mr),Un=E.sound(dr),E),N=(e,n,t)=>(e&&(e.stop(),e.disconnect()),e=Je.createBufferSource(),e.buffer=n,e.connect(Je.destination),t&&(e.loop=!0),e.start(),e.context.state,e.onended=()=>{e?.disconnect(),e=void 0},e),zn=()=>{An=N(An,wn)};var Fn=()=>{Ln=N(Ln,Gn)},Qn=()=>{Mn=N(Mn,Rn)},Vn=()=>{Cn=N(Cn,Nn)},Kn=()=>{En=N(En,Yn)},Jn=()=>{vn=N(vn,Hn)},qn=()=>{Pn=N(Pn,Wn)},$n=()=>{Dn=N(Dn,jn)},eo=()=>{Bn=N(Bn,Xn)},to=()=>{kn=N(kn,Un)};var br=.005,Or=.008,no=20,te=60,Ir=5,oo=10,ro=27,Sr=3e3,qe=30,_r=10,f=[{x:0,y:0,dx:0,dy:0}],De=me(900),Tt=me(2e3),Pe=me(4e3),be=!1,ne=!1,Be=!1,et=!1,re=0,Oe=0,oe=1,Lt=0,tt=0,lo=Pe.duration,Ie,At={x:0,y:0},so=e=>{f=e.map(n=>({...n,dx:0,dy:0})),be=!1,ne=!1,Be=!1,re=0,Oe=0,oe=1,Lt=0,tt=0,Ie=ce(),ee(Tt),ee(Pe),j(1920/2,1080/2,!0,B)},hr=(e,n)=>f.some(t=>t.x===e&&t.y===n),yr=()=>{let e=f.map(n=>({x:n.x,y:n.y}));hn(e,fn(),an(),cn())},io=()=>{let e=yn();e&&(f=e.playerRects.map(n=>({...n,dx:0,dy:0})),pn(e.growItems,e.renderables,e.shrinkItems))},gr=()=>{j(1920/2,1080/2,!1,B,()=>{nt(uo())})},xr=(e,n)=>{let t=f[0];f.unshift({x:t.x,y:t.y,dx:e,dy:n}),$n(),be=!0},Tr=(e,n)=>{if(f.length<=1){ao();return}eo(),f.pop(),co(e,n)},ao=()=>{f.forEach(e=>{_t(e.x,e.y)&&fe(Ie,e.x,e.y)}),qn(),De.onComplete=()=>io(),ee(De)},co=(e,n)=>{be=!0,re=0,f[0].dx=e,f[0].dy=n;for(let t=1;t<f.length;t++){let o=f[t],r=f[t-1];o.dx=r.x-o.x,o.dy=r.y-o.y}},$e=(e,n)=>{let t=f[0],o=t.x+e,r=t.y+n;!St(o,r)&&!hr(o,r)?(yr(),ht(o,r)?(ln(o,r),fe(Ie,o,r),xr(e,n)):yt(o,r)?(sn(o,r),fe(Ie,o,r),Tr(e,n)):(co(e,n),Vn())):(Be=!0,Oe=0,At={x:e,y:n},Kn())},fo=e=>{if(Sn()||(pe(Ie,e),de(De,e),xt(De)))return;Lt+=e/Sr,tt+=e/lo,de(Tt,e)&&(gt(Tt,ct(500,7e3)),oe=0),oe<1?oe+=e*.01:oe=1,de(Pe,e)&&(gt(Pe,ct(200,5e3)),lo=Pe.duration),Be&&(Oe+=e*.01,Oe>=1&&(Be=!1,Oe=0));let n=be||ne;if(n||(l.btnp.up?$e(0,-1):l.btnp.dn?$e(0,1):l.btnp.lf?$e(-1,0):l.btnp.rt?$e(1,0):l.btnp.undo?io():l.btnp.reset&&gr()),n){let t=ne?Or*e:br*e;if(re+=t,re>=1){re=0,be=!1,et=f[f.length-1].dx<0;for(let s=0;s<f.length;s++){let p=f[s];p.x+=p.dx,p.y+=p.dy,p.dx=0,p.dy=0}if(f.every(s=>!St(s.x,s.y+1)&&!ht(s.x,s.y+1)&&!yt(s.x,s.y+1))?(f.forEach(s=>s.dy=1),ne=!0,be=!0):ne&&(Jn(),ne=!1),Ar()){to();let s=f[0];j(s.x*100-_.x+100/2,s.y*100-_.y+100/2,!1,B,()=>{Se(1)})}Lr()&&ao()}}},po=e=>{if(e.fillStyle=H,ue(Ie,e),xt(De))return;let n=f[0],t=f[f.length-1],o=ne?re:Xe(0,1,Ue(re)),r=Ze(o)*n.dx,s=Ze(Lt%1),p=Be?Ze(Oe)*10:0,c=p*At.x,h=p*At.y,S=no+s*2+r,P=(n.x+n.dx*o)*100-_.x+c,U=(n.y+n.dy*o)*100-_.y+h;e.beginPath(),e.moveTo(P+100/2,U+S+100/2);for(let T=1;T<f.length;T++){let C=f[T],ge=(C.x+C.dx*o)*100-_.x+100/2+c,K=(C.y+C.dy*o)*100-_.y+S+100/2+h;e.lineTo(ge,K)}e.lineWidth=60-s*4-r*2,e.lineCap="round",e.lineJoin="round",e.strokeStyle=H,e.stroke(),e.closePath();let i=(t.x+t.dx*o)*100-_.x+(et?60:30)+c,m=40+S+(t.y+t.dy*o)*100-_.y+h,x=tt%1,y=et?i+x*qe:i-x*qe,g=Math.sin(tt*Math.PI)*_r;e.lineWidth=10,e.beginPath(),e.moveTo(i,m),e.bezierCurveTo(y,m+g,y,m-g,et?i+qe:i-qe,m),e.stroke(),e.closePath();let b=P+100/4,O=U+no/2+100/4,D=b+te/2,A=O+te/2;e.translate(D,A),e.rotate(Math.PI*.05*r),e.translate(-D,-A),e.lineWidth=10,e.beginPath(),e.roundRect(b,O,te,te,Ir),e.fillStyle=H,e.fill(),e.moveTo(b,O+5),e.lineTo(b,O-oo),e.lineTo(b+ro,O+5),e.moveTo(b+te,O+5),e.lineTo(b+te,O-oo),e.lineTo(b+(te-ro),O+5),e.closePath(),e.stroke(),e.beginPath(),e.ellipse(b+15,O+20,5,7*oe,0,0,Math.PI*2),e.ellipse(b+45,O+20,5,7*oe,0,0,Math.PI*2),e.closePath(),e.fillStyle="lightyellow",e.fill(),e.beginPath(),e.ellipse(b+15+1,O+20+2,2,4,0,0,Math.PI*2),e.ellipse(b+45+1,O+20+2,2,4,0,0,Math.PI*2),e.closePath(),e.fillStyle=H,e.fill(),e.beginPath(),e.arc(b+30,O+30,3,0,Math.PI*2),e.moveTo(b+30,O+30),e.lineTo(b+30,O+40),e.closePath(),e.fillStyle=L,e.strokeStyle=L,e.lineWidth=1,e.fill(),e.stroke(),e.setTransform(1,0,0,1,0,0)},Ar=()=>rn(f[0].x,f[0].y)&&Ee(),Lr=()=>f.some(e=>_t(e.x,e.y));var mo=42,ot=mo,Q=()=>(ot=(ot*9301+49297)%233280,ot/233280),rt=[],Mr=()=>{ot=mo,rt.length=0;let e=8;for(let n=0;n<e;n++){let t=20+Q()*30,o=5+Math.floor(Q()*3),r=[];for(let s=0;s<o;s++)r.push({relativeX:(Q()-.5)*1.5,relativeY:(Q()-.5)*.8,size:.3+Q()*.4});rt.push({x:Q()*2120-100,baseY:Q()*1080*.6,size:t,speed:10+Q()*20,phase:q(0,Math.PI*2),alpha:q(.1,.7),bubbles:r})}},bo=()=>{Mr()},Oo=e=>{for(let n of rt)n.x+=n.speed*e,n.x>2020&&(n.x=-100)},Cr=(e,n,t,o)=>{e.beginPath();for(let r of n.bubbles){let s=t+r.relativeX*n.size,p=o+r.relativeY*n.size,c=n.size*r.size;e.moveTo(s+c,p),e.arc(s,p,c,0,Math.PI*2)}e.fillStyle=L,e.globalAlpha=n.alpha,e.fill(),e.globalAlpha=1},Io=(e,n=0)=>{let t=e.createLinearGradient(0,0,0,1080);t.addColorStop(0,Ft),t.addColorStop(1,je),e.fillStyle=t,e.fillRect(0,0,1920,1080);for(let o of rt){let r=o.baseY+Math.sin(n*.5+o.phase)*3;Cr(e,o,o.x,r)}};var Ct=0,le=M[0],Et=0,nt=e=>{Ct=e,le=M[Ct],Et=0,tn(le),bo(),gn();let n=le[0].length*100,t=le.length*100;_.x=(n-1920)/2,_.y=(t-1080)/2;let o=[];for(let r=0;r<le.length;r++)for(let s=0;s<le[r].length;s++){let p=le[r][s];(p===9||p===10)&&o.unshift({x:s,y:r,dx:0,dy:0})}so(o)},So=e=>{Et+=e/1e3,Oo(e/1e3),nn(e),fo(e)},_o=e=>{Io(e,Et),on(e),po(e),ho(e)},uo=()=>Ct;var lt={x:0,y:0},_e=80,he=90,vt=e=>{lt.x+=.05*e,lt.y+=.03*e},yo=e=>{vt(e),(l.btnp.sel||l.btn.clk)&&(Zn(),zn(),j(1920/2,1080/2,!1,B,()=>{Se(1)}))},Pt=e=>{e.fillStyle=Le,e.fillRect(0,0,1920,1080);let n=lt.x%(_e+he),t=lt.y%(_e+he);for(let o=-n;o<1920+_e+he;o+=_e+he)for(let r=-t;r<1080+_e+he;r+=_e+he)e.fillStyle=ae,e.translate(o,r),e.fill(ft),e.translate(-15,-15),e.fillStyle=Zt,e.fill(ft),e.setTransform(1,0,0,1,0,0)},go=e=>{Pt(e);let n=1920/2,t=1080/2;e.fillStyle=Xt,e.beginPath(),e.roundRect(n-300,t-70,600,100,20),e.closePath(),e.fill(),e.textAlign="center",e.font="bold 48px Arial",e.strokeStyle=H,e.fillStyle=ae,e.strokeText("非牛顿猫",n,t),e.strokeText("非牛顿猫",n+1,t+1),e.fillText("非牛顿猫",n+3,t+3),e.fillStyle=ae,e.font="bold 24px Arial",e.fillText("由LUMIN制作",n,t+100)};var Y=200,ye=50,Ao=120,Lo=150,V=Math.floor((1920-ye*2)/(Y+ye)),Pr=32,Dr=16,X=0,st=[],Dt,Mo=()=>{for(let e=0;e<M.length;e++)st[e]=1;Dt=ce(Dr,Pr),_.x=0,_.y=0,j(1920/2,1080/2,!0,B)},xo=e=>{X=e,j(1920/2,1080/2,!1,B,()=>{nt(e),Se(2)})},ke=e=>{X!==e&&(X=e,Fn())},Co=e=>{if(vt(e),pe(Dt,e),l.btnp.lf){let t=X-1;for(;t>=0;)t--;t>=0&&ke(t)}if(l.btnp.rt){let t=X+1;for(;t<M.length;)t++;t<M.length&&ke(t)}if(l.btnp.up){let t=X-V;for(;t>=0;)t-=V;t>=0&&ke(t)}if(l.btnp.dn){let t=X+V;for(;t<M.length;)t+=V;t<M.length&&ke(t)}if(l.btnp.sel&&xo(X),l.btn.clk){let t=To(l.ptr.x,l.ptr.y);t>=0&&t<M.length&&(xo(t),Qn())}let n=To(l.ptr.x,l.ptr.y);n>=0&&ke(n);for(let t=0;t<M.length;t++){let r=t===X?1.1:1;st[t]=Xe(st[t],r,.15)}},To=(e,n)=>{for(let t=0;t<M.length;t++){let o=t%V,r=Math.floor(t/V),s=Ao+o*(Y+ye),p=Lo+r*(Y+ye);if(Me(e,n,s,p,Y,Y))return t}return-1},Eo=e=>{Pt(e),e.roundRect(80,100,1790,880,25),e.fillStyle=Ut,e.fill();let n=new Set;for(let t=0;t<M.length;t++){let o=t%V,r=Math.floor(t/V),s=Ao+o*(Y+ye),p=Lo+r*(Y+ye),c=!1,h=!0,S=Y*st[t],P=s-(S-Y)/2,U=p-(S-Y)/2;e.fillStyle=je,e.beginPath(),e.roundRect(P,U,S,S,8),e.closePath(),e.fill(),e.strokeStyle=Qt,e.lineWidth=2,e.beginPath(),e.roundRect(P,U,S,S,8),e.closePath(),e.stroke(),e.fillStyle=L,e.font="24px Arial",e.textAlign="center",e.fillText((t+1).toString(),P+S/2,U+S/2+8)}e.fillStyle=zt,ue(Dt,e)};var we=0,Se=e=>{switch(we=e,e){case 1:Mo();break;case 2:break}},vo=e=>{switch(In(e),we){case 0:yo(e);break;case 1:Co(e);break;case 2:So(e);break}},Po=e=>{switch(we){case 0:go(e);break;case 1:Eo(e);break;case 2:_o(e);break}_n(e)};var I=80,v=20,Do=.6,Ge=[{x:1920-v-I,y:1080-v-I,key:"↶",pressed:!1},{x:1920-v-I,y:1080-v-I*2-10,key:"R",pressed:!1}],se=[{x:v+I+10,y:1080-v-I*2-10,key:"▲",pressed:!1},{x:v+I+10,y:1080-v-I,key:"▼",pressed:!1},{x:v,y:1080-v-I,key:"◀",pressed:!1},{x:v+I*2+20,y:1080-v-I,key:"▶",pressed:!1}],Bo=()=>{we===2&&(Ge.forEach(e=>{e.pressed=!1,l.btn.clk&&Me(l.ptr.x,l.ptr.y,e.x,e.y,I,I)&&(e.pressed=!0)}),l.hasTouch&&se.forEach(e=>{e.pressed=!1,l.btn.clk&&Me(l.ptr.x,l.ptr.y,e.x,e.y,I,I)&&(e.pressed=!0)}))},ho=e=>{e.font="24px Arial",e.textAlign="center",e.textBaseline="middle",Ge.forEach(n=>{e.beginPath(),e.roundRect(n.x,n.y,I,I,4),e.closePath(),e.fillStyle=n.pressed?L:Le,e.globalAlpha=n.pressed?1:Do,e.fill(),e.fillStyle=L;let t=n.x+I/2,o=n.y+I/2;e.fillText(n.key,t,o)}),l.hasTouch&&se.forEach(n=>{e.beginPath(),e.roundRect(n.x,n.y,I,I,4),e.closePath(),e.fillStyle=n.pressed?L:Le,e.globalAlpha=n.pressed?1:Do,e.fill(),e.fillStyle=L,e.font="24px Arial",e.textAlign="center",e.textBaseline="middle";let t=n.x+I/2,o=n.y+I/2;e.fillText(n.key,t,o)}),e.globalAlpha=1};var l={hasTouch:!1,ptr:{x:0,y:0},ptrDown:{x:0,y:0},btn:{up:!1,lf:!1,dn:!1,rt:!1,clk:!1,sel:!1,undo:!1,reset:!1},btnp:{up:!1,lf:!1,dn:!1,rt:!1,sel:!1,clk:!1,undo:!1,reset:!1}},ko=(e,n,t)=>{let o;l.hasTouch="ontouchstart"in window;let r={up:!1,lf:!1,dn:!1,rt:!1,clk:!1,sel:!1,undo:!1,reset:!1},s={up:!1,lf:!1,dn:!1,rt:!1,clk:!1,sel:!1,undo:!1,reset:!1},p=c=>({code:h})=>{switch(h){case"ArrowUp":case"KeyW":r.up=c;break;case"ArrowDown":case"KeyS":r.dn=c;break;case"ArrowLeft":case"KeyA":r.lf=c;break;case"ArrowRight":case"KeyD":r.rt=c;break;case"KeyZ":r.undo=c;break;case"KeyR":r.reset=c;break;case"Space":case"Enter":l.btn.sel=c;break}};return onkeydown=p(!0),onkeyup=p(!1),window.ongamepadconnected=c=>{o=c.gamepad},window.ongamepaddisconnected=()=>{o=void 0},oncontextmenu=c=>{c.preventDefault()},e.onpointerdown=()=>l.btn.clk=!0,e.onpointerup=()=>l.btn.clk=!1,e.onpointermove=c=>{let h=Math.min(innerWidth/n,innerHeight/t);l.ptr.x=c.offsetX/h,l.ptr.y=c.offsetY/h},l.hasTouch&&(e.ontouchstart=e.ontouchmove=e.ontouchend=e.ontouchcancel=c=>{if(c.preventDefault(),l.btn.clk){let h=e.getBoundingClientRect(),S=c.touches[0],P=Math.min(innerWidth/n,innerHeight/t);l.ptr.x=(S.clientX-h.left)/P,l.ptr.y=(S.clientY-h.top)/P}}),()=>{l.btn.clk&&(l.ptrDown={x:l.ptr.x,y:l.ptr.y}),l.btn.up=r.up,l.btn.dn=r.dn,l.btn.lf=r.lf,l.btn.rt=r.rt,l.btn.sel=r.sel,l.btn.undo=r.undo,l.btn.reset=r.reset,Bo(),l.btn.up||=se[0].pressed,l.btn.dn||=se[1].pressed,l.btn.lf||=se[2].pressed,l.btn.rt||=se[3].pressed,l.btn.undo||=Ge[0].pressed,l.btn.reset||=Ge[1].pressed,o&&(l.btn.up||=o.buttons[12]?.pressed,l.btn.dn||=o.buttons[13]?.pressed,l.btn.lf||=o.buttons[14]?.pressed,l.btn.rt||=o.buttons[15]?.pressed,l.btn.sel||=o.buttons[0]?.pressed,l.btn.undo||=o.buttons[1]?.pressed,l.btn.reset||=o.buttons[2]?.pressed),l.btnp.clk=l.btn.clk&&!s.clk,l.btnp.up=l.btn.up&&!s.up,l.btnp.dn=l.btn.dn&&!s.dn,l.btnp.lf=l.btn.lf&&!s.lf,l.btnp.rt=l.btn.rt&&!s.rt,l.btnp.sel=l.btn.sel&&!s.sel,l.btnp.undo=l.btn.undo&&!s.undo,l.btnp.reset=l.btn.reset&&!s.reset,s.clk=l.btn.clk,s.up=l.btn.up,s.dn=l.btn.dn,s.lf=l.btn.lf,s.rt=l.btn.rt,s.sel=l.btn.sel,s.undo=l.btn.undo,s.reset=l.btn.reset}};var kt=document.getElementById("c"),Bt=kt.getContext("2d");innerWidth<innerHeight&&alert("为了最佳体验请使用横屏模式");(onresize=()=>{Vt(kt,1920,1080)})();var Br=ko(kt,1920,1080);Kt(e=>{Br(),vo(e)},()=>{Bt.fillStyle=H,Bt.fillRect(0,0,1920,1080),Po(Bt)});})();
